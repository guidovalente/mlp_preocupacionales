{% extends "base.html" %}
{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='datatables/css/dataTables.bootstrap4.min.css')}}">
<script type="text/javascript" src="{{ url_for('static', filename='datatables/js/jquery.dataTables.min.js')}}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='datatables/js/dataTables.bootstrap4.min.js')}}"></script>
<script type="text/javascript" class="init">
  $(document).ready(function() {
    $('#example').DataTable( {
      "dom": '<"row justify-content-end"<"col-1"l><"col-8"p><"col-3"f>>ti'
    } );
  } );
</script>
{% endblock %}
{% block contenido %}
<div class="mt-3">
  <a href="{{ url_for('preocupacionales.nuevo_agente') }}" class="btn btn-info"><i class="fas fa-user-plus"></i> Nuevo agente</a>
  <a href="#" class="btn btn-info"><i class="fas fa-file-export"></i> Exportar listado</a>
</div>
<div class="mt-3">
  <table id="example" class="table text-center table-striped table-bordered table-hover table-sm" width="100%">
    <thead class="thead-light ">
      <tr>
        <th scope="col" colspan="6">Datos</th>
        <th scope="col" colspan="2">Preocupacional</th>
        <th scope="col" colspan="1"></th>
      </tr>
      <tr>
        <th scope="col">Nombre</th>
        <th scope="col">Apellido</th>
        <th scope="col">DNI</th>
        <th scope="col">Teléfono</th>
        <th scope="col">Nº Legajo</th>
        <th scope="col">Repartición</th>
        <th scope="col">Apto</th>
        <th scope="col">Apto</th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
      {% for agente in agentes %}
      {% if agente.apto_psicologico == 1 %}
      {% set apto_psicologico = 'Sí' %}
      {% elif agente.apto_psicologico == 2 %}
      {% set apto_psicologico = 'No' %}
      {% else %}
      {% set apto_psicologico = '-' %}
      {% endif %}
      {% if agente.apto_medico == 1 %}
      {% set apto_medico = 'Sí' %}
      {% elif agente.apto_medico == 2 %}
      {% set apto_medico = 'No' %}
      {% else %}
      {% set apto_medico = '-' %}
      {% endif %}
      <tr>
        <td>{{ agente.nombre }}</td>
        <td>{{ agente.apellido }}</td>
        <td>{{ agente.dni }}</td>
        <td>{{ agente.telefono or '-' }}</td>
        <td>{{ agente.legajo or '-' }}</td>
        <td>{{ agente.reparticion }}</td>
        <td>{{ apto_psicologico }}</td>
        <td>{{ apto_medico }}</td>
        <td><a class="text-body" href="{{ url_for('preocupacionales.editar_agente', id=agente.id) }}"><i class="fas fa-eye"></i></a></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
